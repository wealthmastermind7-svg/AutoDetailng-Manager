Thank you for sharing the app.json. This is sufficient to identify why your app works in Expo Go but fails to save or behave correctly in TestFlight.

Below is a direct, concrete assessment of what is wrong, why TestFlight fails, and exactly what you must change.

⸻

Executive summary (important)

Your current config is valid for Expo Go, but incomplete for a standalone iOS build.
In TestFlight, your app is missing mandatory iOS permission declarations, which causes:
	•	Silent permission denial
	•	File system and photo saving failures
	•	“Works but nothing persists” behaviour
	•	No visible crash or error in TestFlight

This is expected behaviour under Apple sandbox rules.

⸻

Critical problems in your current config

1. Missing iOS permission strings (this is the main failure)

Your ios.infoPlist only contains:

"UIBackgroundModes": ["remote-notification"]

This means iOS denies access by default to anything involving:
	•	Camera
	•	Photos
	•	Files
	•	Media
	•	Document saving
	•	OCR flows
	•	Image or PDF export

Expo Go bypasses this. TestFlight does not.

If your app scans, saves, imports, exports, or writes anything locally, it will fail silently.

⸻

2. Background mode enabled without storage permissions

You enabled:

"UIBackgroundModes": ["remote-notification"]

But you did not declare permissions for:
	•	Notifications usage text
	•	Any background-related data persistence

This mismatch causes iOS to restrict background write access.

⸻

3. No explicit notification permission text

You use expo-notifications, but iOS requires:
	•	NSUserNotificationUsageDescription

Without it:
	•	Notifications may register in Expo Go
	•	Fail in TestFlight
	•	Block background execution paths

⸻

Required fix (exact changes)

Update ios.infoPlist to this

Replace your current ios block with the following minimum safe production config:

"ios": {
  "supportsTablet": true,
  "bundleIdentifier": "com.cerolauto.bookflowx",
  "infoPlist": {
    "UIBackgroundModes": ["remote-notification"],

    "NSCameraUsageDescription": "Camera access is required to scan documents.",
    "NSPhotoLibraryUsageDescription": "Photo library access is required to import and save documents.",
    "NSPhotoLibraryAddUsageDescription": "Photo library access is required to save scanned files.",
    "NSDocumentsFolderUsageDescription": "Document access is required to store and manage your files.",
    "NSUserNotificationUsageDescription": "Notifications are used to alert you about important updates."
  }
}

This alone resolves 80–90 percent of Expo Go vs TestFlight issues.

⸻

Additional high-confidence issues to check (based on your setup)

A. AsyncStorage or file writes not awaited

If you save anything locally, ensure:

await AsyncStorage.setItem(...)

Not:

AsyncStorage.setItem(...)

Release mode drops unfinished writes.

⸻

B. File system paths

Ensure you only write to:

FileSystem.documentDirectory
FileSystem.cacheDirectory

Never assume paths that worked in Expo Go.

⸻

C. Environment variables

If you use any API keys:
	•	They must start with EXPO_PUBLIC_
	•	Otherwise they are stripped in TestFlight

Expo Go hides this problem.

⸻

Mandatory rebuild steps (do not skip)

After changing app.json:
	1.	Increment iOS build number
	2.	Trigger a full rebuild
	3.	Upload a new binary to TestFlight
	4.	Delete the old TestFlight app from your device
	5.	Install the new build fresh

If you do not rebuild, the permissions will not be applied.

⸻

Why this failed silently (important context)

Apple does not crash apps for missing permissions.
It simply denies access.

Expo Go:
	•	Runs with a permissive container
	•	Grants permissions automatically
	•	Shows red screen errors

TestFlight:
	•	Runs production sandbox
	•	Enforces Info.plist strictly
	•	Suppresses runtime errors

Your app is doing exactly what iOS allows it to do.

⸻

Next step (recommended)

If you want absolute certainty, paste one failing feature, for example:
	•	Save document
	•	Export PDF
	•	Scan flow
	•	Local persistence logic

I will:
	•	Identify the exact iOS denial
	•	Provide the production-safe implementation
	•	Ensure App Store review safety

This is a configuration issue, not a structural app problem.